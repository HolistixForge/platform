{
  "func_projects_list_by_user": {
    "query": "select * from func_projects_list_by_user($1)",
    "types": "s",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "proc_projects_new_personal": {
    "query": "call proc_projects_new_personal($1, $2, $3, $4)",
    "types": "s,s,b,o",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "unique_projects_name_organization",
          "message": "a project with this name exists in this organization yet."
        },
        {
          "constraint": "unique_projects_name_personal",
          "message": "you already own a project with this name."
        }
      ]
    }
  },
  "func_projects_get_by_owner_and_name": {
    "query": "select * from func_projects_get_by_owner_and_name($1, $2, $3)",
    "types": "s,s,i",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": []
    }
  },
  "func_projects_get_by_id": {
    "query": "select * from func_projects_get_by_id($1)",
    "types": "s",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": []
    }
  },
  "func_projects_get_by_server_id": {
    "query": "select * from func_projects_get_by_server_id($1)",
    "types": "i",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": []
    }
  },
  "func_projects_servers_list": {
    "query": "select * from func_projects_servers_list($1)",
    "types": "i",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "func_images_list_available": {
    "query": "select * from func_images_list_available()",
    "types": "",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "func_projects_members_list": {
    "query": "select * from func_projects_members_list($1)",
    "types": "i",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "func_users_search": {
    "query": "select * from func_users_search($1,$2)",
    "types": "s,s",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "proc_projects_servers_new": {
    "query": "call proc_projects_servers_new($1,$2,$3,$4,$5)",
    "types": "i,s,s,i,o",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "fk_project_id",
          "message": "this project does not exists."
        },
        {
          "constraint": "fk_image_id",
          "message": "this image does not exists."
        },
        {
          "constraint": "projects_servers_unique_name",
          "message": "a server with this name exists yet."
        },
        {
          "constraint": "image_not_found",
          "message": "this image does not exists."
        }
      ]
    }
  },
  "func_mounts_server_list": {
    "query": "select * from func_mounts_server_list($1,$2)",
    "types": "i,i",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "func_volumes_project_list": {
    "query": "select * from func_volumes_project_list($1)",
    "types": "i",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "proc_volumes_new": {
    "query": "call proc_volumes_new($1,$2,$3,$4)",
    "types": "i,s,i,o",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "fk_volumes_project_id",
          "message": "this project does not exists."
        },
        {
          "constraint": "volume_unique_name",
          "message": "a volume with this name exists yet."
        }
      ]
    }
  },
  "proc_mounts_new": {
    "query": "call proc_mounts_new($1,$2,$3,$4)",
    "types": "i,i,i,s",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "fk_mounts_project_server_id",
          "message": "this server does not exist."
        },
        {
          "constraint": "mounts_unique_point",
          "message": "a volume is mounted on this path yet."
        },
        {
          "constraint": "server_running",
          "message": "this server is running."
        },
        {
          "constraint": "volume_not_found",
          "message": "no such volume."
        }
      ]
    }
  },
  "proc_mounts_delete": {
    "query": "call proc_mounts_delete($1,$2,$3)",
    "types": "i,i,s",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "server_running",
          "message": "this server is running."
        }
      ]
    }
  },
  "proc_volumes_delete": {
    "query": "call proc_volumes_delete($1,$2)",
    "types": "i,o",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "server_running",
          "message": "servers with this volume mounted are still running."
        },
        {
          "constraint": "nothing_done",
          "message": "this volume does not exist."
        }
      ]
    }
  },
  "proc_projects_servers_delete": {
    "query": "call proc_projects_servers_delete($1,$2)",
    "types": "i,i",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "server_still_running",
          "message": "stop the server before deleting."
        },
        {
          "constraint": "delete_cloud_resource_before",
          "message": "Delete the associated cloud resource before deleting this resource."
        },
        {
          "constraint": "nothing_done",
          "message": "this server does not exist."
        }
      ]
    }
  },
  "proc_projects_delete": {
    "query": "call proc_projects_delete($1)",
    "types": "i",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "nothing_done",
          "message": "this project does not exists."
        },
        {
          "constraint": "server_still_running",
          "message": "this project has one or more servers still running."
        }
      ]
    }
  },
  "proc_projects_members_edit": {
    "query": "call proc_projects_members_edit($1,$2,$3)",
    "types": "i,s,s",
    "return": {
      "resultsets": [],
      "failures": [
        {
          "constraint": "fk_projects_members_users_user_id",
          "message": "no such user"
        },
        {
          "constraint": "cannot_change_owner_scope",
          "message": "Project's owner authorizations cannot be changed."
        }
      ]
    }
  },
  "proc_projects_start": {
    "query": "call proc_projects_start($1, $2, $3)",
    "types": "s,o,o",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "no_gateway_available",
          "message": "no more project gateway currently available"
        }
      ]
    }
  },
  "func_projects_gateways_get": {
    "query": "select * from func_projects_gateways_get($1)",
    "types": "s",
    "return": {
      "resultsets": [
        {
          "expect": "one-row"
        }
      ],
      "failures": [
        {
          "constraint": "invalid_handshake_token",
          "message": "invalid gateway-project handshake token"
        }
      ]
    }
  },
  "func_projects_servers_get": {
    "query": "select * from func_projects_servers_get($1,$2)",
    "types": "s,i",
    "return": {
      "resultsets": [
        {
          "expect": "multiple"
        }
      ],
      "failures": []
    }
  },
  "proc_gateways_set_ready": {
    "query": "call proc_gateways_set_ready($1)",
    "types": "s",
    "return": {
      "resultsets": []
    }
  },
  "proc_projects_gateways_stop": {
    "query": "call proc_projects_gateways_stop($1)",
    "types": "s",
    "return": {
      "resultsets": []
    }
  },
  "proc_projects_servers_set_location": {
    "query": "call proc_projects_servers_set_location($1,$2,$3,$4)",
    "types": "s,i,s,s",
    "return": {
      "resultsets": [],
      "failures": [
        {
          "constraint": "server_is_hosted_yet",
          "message": "server is hosted yet"
        },
        {
          "constraint": "server_exists_in_cloud",
          "message": "server exists in cloud"
        }
      ]
    }
  }
}